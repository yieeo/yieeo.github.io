<!DOCTYPE html><html prefix="og: http://ogp.me/ns#"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>JavaScript this Keyword Â· ğŸ¥ yie's Blog ğŸˆ</title><meta name="description" content="JavaScript this Keyword - yie"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.ico"><link rel="stylesheet" href="//at.alicdn.com/t/font_1472710214_6648843.css"><link rel="stylesheet" href="//raw.githack.com/xwartz/hexo-theme-nuna/next/source/style/main.css?v=1.0.3"></head><body class="pupa"><div class="loading-bar"></div><main><div class="post post"><article itemscope itemtype="http://schema.org/Article" class="hentry"><div class="container"><div class="entry-header"><h1 class="entry-title">JavaScript this Keyword</h1><div class="entry-description"></div><div class="entry-meta"><time itemprop="datePublished" datetime="Friday, January 19th 2018, 8:56:14 pm" class="updated">Jan 19, 2018</time><em class="post-count">5,956 words</em></div></div><div itemprop="articleBody" class="entry-content"><p>åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡çš„åˆ›å»ºé˜¶æ®µ, ä¼šåˆ†åˆ«ç”Ÿæˆå˜é‡å¯¹è±¡, å»ºç«‹ä½œç”¨åŸŸé“¾, ç¡®å®šthisæŒ‡å‘. thisæŒ‡å‘æ˜¯åœ¨å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ç¡®å®šçš„, ä¹Ÿå°±æ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡è¢«åˆ›å»ºæ—¶ç¡®å®šçš„. ä¸€ä¸ªå‡½æ•°ä¸­çš„thisæŒ‡å‘å¯ä»¥éå¸¸çµæ´».</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">5</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo(); <span class="comment">// 4</span></span><br><span class="line">foo.call(obj); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­, thisä¸€æ—¦è¢«ç¡®å®š, å°±ä¸å¯æ›´æ”¹.</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">5</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span> = obj; <span class="comment">// è¯•å›¾ä¿®æ”¹this, è¿è¡Œæ—¶ä¼šæŠ¥é”™</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo();</span><br></pre></td></tr></table></figure>
<h4 id="å…¨å±€å¯¹è±¡ä¸­çš„this"><a href="#å…¨å±€å¯¹è±¡ä¸­çš„this" class="headerlink" title="å…¨å±€å¯¹è±¡ä¸­çš„this"></a>å…¨å±€å¯¹è±¡ä¸­çš„this</h4><blockquote>
<p>å…¨å±€å¯¹è±¡å¯¹è±¡ä¸­çš„this, æŒ‡å‘å®ƒæœ¬èº«.</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€šè¿‡thisç»‘å®šåˆ°å…¨å±€å¯¹è±¡</span></span><br><span class="line"><span class="keyword">this</span>.a = <span class="string">'zero'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡å£°æ˜ç»‘å®šåˆ°å˜é‡å¯¹è±¡, å…¨å±€ç¯å¢ƒä¸­å˜é‡å¯¹è±¡å°±æ˜¯å®ƒæœ¬èº«</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="string">'one'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// èµ‹å€¼æ“ä½œ, æ ‡è¯†ç¬¦ä¼šéšå¼ç»‘å®šåˆ°å…¨å±€å¯¹è±¡</span></span><br><span class="line">c = <span class="string">'two'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å°æ—¥å¿—</span></span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br><span class="line"><span class="built_in">console</span>.log(c);</span><br></pre></td></tr></table></figure>
<h4 id="å‡½æ•°ä¸­çš„this"><a href="#å‡½æ•°ä¸­çš„this" class="headerlink" title="å‡½æ•°ä¸­çš„this"></a>å‡½æ•°ä¸­çš„this</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// the first demo</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// the second demo</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</span><br><span class="line">  &#125;</span><br><span class="line">  foo();</span><br><span class="line">&#125;</span><br><span class="line">bar();</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// the third demo</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">50</span>,</span><br><span class="line">  b: <span class="keyword">this</span>.a + <span class="number">10</span>,</span><br><span class="line">  foo: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.a;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj.b);</span><br><span class="line"><span class="built_in">console</span>.log(obj.foo());</span><br></pre></td></tr></table></figure>
<p>æƒ³è¦å‡†ç¡®ç¡®å®šthisæŒ‡å‘, æ‰¾åˆ°å‡½æ•°çš„è°ƒç”¨è€…ä»¥åŠåŒºåˆ†å®ƒæ˜¯å¦ç‹¬ç«‹è°ƒç”¨å°±å˜å¾—ååˆ†å…³é”®. åœ¨ä¸€ä¸ªå‡½æ•°ä¸Šä¸‹æ–‡ä¸­, thisç”±è°ƒç”¨è€…æä¾›, ç”±è°ƒç”¨å‡½æ•°çš„æ–¹å¼æ¥å†³å®š. å¦‚æœè°ƒç”¨è€…å‡½æ•°è¢«æŸä¸€ä¸ªå¯¹è±¡æ‰€æ‹¥æœ‰, é‚£ä¹ˆè¯¥å‡½æ•°åœ¨è°ƒç”¨æ—¶, å†…éƒ¨çš„thisæŒ‡å‘è¯¥å¯¹è±¡, å¦‚æœå‡½æ•°ç‹¬ç«‹è°ƒç”¨, é‚£ä¹ˆè¯¥å‡½æ•°å†…éƒ¨çš„this, åˆ™æŒ‡å‘undefined. ä½†åœ¨éä¸¥æ ¼æ¨¡å¼ä¸­, thisæŒ‡å‘undefinedæ—¶, å®ƒä¼šè¢«è‡ªåŠ¨æŒ‡å‘å…¨å±€å¯¹è±¡.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éä¸¥æ ¼æ¨¡å¼thisä¼šè‡ªåŠ¨æŒ‡å‘å…¨å±€, æˆ‘ä»¬åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼è·å¾—æ›´å‡†ç¡®çš„åˆ¤æ–­</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="meta">  'use strict'</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">bar(); <span class="comment">// baræ˜¯è°ƒç”¨è€…, ç‹¬ç«‹è°ƒç”¨</span></span><br><span class="line"><span class="built_in">window</span>.bar(); <span class="comment">// baræ˜¯è°ƒç”¨è€…, è¢«windowå¯¹è±¡æ‰€æ‹¥æœ‰</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­, <code>bar()</code>ä½œä¸ºç‹¬ç«‹è°ƒç”¨è€…, æŒ‰ç…§å®šä¹‰çš„ç†è§£, å®ƒå†…éƒ¨çš„thisæŒ‡å‘<code>undefined</code>. è€Œ<code>window.bar()</code>å› ä¸ºfn()æ–¹æ³•è¢«windowå¯¹è±¡æ‰€æ‹¥æœ‰, å†…éƒ¨çš„thisæŒ‡å‘windowå¯¹è±¡.</p>
<p>åœ¨<code>the third demo</code>ä¸­, å¯¹è±¡objçš„bå±æ€§ä½¿ç”¨<code>this.a + 10</code>æ¥è®¡ç®—. å•ç‹¬çš„<code>{}</code>ä¸ä¼šå½¢æˆæ–°çš„ä½œç”¨åŸŸçš„, å› æ­¤è¿™é‡Œçš„<code>this.a</code>, ç”±äºæ²¡æœ‰ä½œç”¨åŸŸçš„é™åˆ¶, å®ƒä»å¤„äºå…¨å±€ä½œç”¨åŸŸä¸­, æ‰€ä»¥è¿™é‡Œçš„thiså…¶å®æŒ‡å‘çš„æ˜¯windowå¯¹è±¡.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">  a: <span class="number">8</span>,</span><br><span class="line">  bar: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.a;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(foo.bar()); <span class="comment">// 8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bingo = foo.bar();</span><br><span class="line"><span class="built_in">console</span>.log(bingo()); <span class="comment">// 5</span></span><br></pre></td></tr></table></figure>
<p><code>foo.bar()</code>ä¸­, baræ˜¯è°ƒç”¨è€…, å®ƒä¸æ˜¯ç‹¬ç«‹è°ƒç”¨, è¢«å¯¹è±¡fooæ‰€æ‹¥æœ‰, å› æ­¤å®ƒçš„thisæŒ‡å‘foo. è€Œ<code>bingo()</code>ä½œä¸ºè°ƒç”¨è€…, å°½ç®¡å®ƒä¸foo.barçš„å¼•ç”¨ç›¸åŒ, ä½†æ˜¯å®ƒæ˜¯ç‹¬ç«‹è°ƒç”¨çš„, å› æ­¤thisæŒ‡å‘undefined, åœ¨éä¸¥æ ¼æ¨¡å¼ä¸­, è‡ªåŠ¨æŒ‡å‘windowå…¨å±€å¯¹è±¡.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¨å¾®ä¿®æ”¹ä¸€ä¸‹ä»£ç </span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">5</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">  a: <span class="number">8</span>,</span><br><span class="line">  bar: bar</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(foo.bar()); <span class="comment">// 8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å†æ¬¡ä¿®æ”¹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bingo</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  fn(); <span class="comment">// ç‹¬ç«‹è°ƒç”¨</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">8</span>,</span><br><span class="line">  bar: foo</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">bingo(obj.bar); <span class="comment">// 8</span></span><br></pre></td></tr></table></figure>
<h4 id="call-applyæ˜¾å¼æŒ‡å®šthisæŒ‡å‘"><a href="#call-applyæ˜¾å¼æŒ‡å®šthisæŒ‡å‘" class="headerlink" title="call,applyæ˜¾å¼æŒ‡å®šthisæŒ‡å‘"></a>call,applyæ˜¾å¼æŒ‡å®šthisæŒ‡å‘</h4><p>JavaScriptå†…éƒ¨ç»™æˆ‘ä»¬æä¾›ä¸¤ç§æ–¹æ³•<code>call()</code>å’Œ<code>apply()</code>, å¯ä»¥æ‰‹åŠ¨è®¾ç½®thisçš„æŒ‡å‘. æ‰€æœ‰å‡½æ•°éƒ½å…·æœ‰è¿™ä¸¤ä¸ªæ–¹æ³•, é™¤äº†å‚æ•°ç•¥æœ‰ä¸åŒ, å®ç°åŠŸèƒ½å®Œå…¨ä¸€æ ·.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">10</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// barå¹¶ä¸æ˜¯objçš„æ–¹æ³•, é€šè¿‡callæ–¹æ³•, å°†barå†…éƒ¨çš„thisæŒ‡å‘objå¯¹è±¡</span></span><br><span class="line"><span class="comment">// é€šè¿‡this.aè®¿é—®objçš„aå±æ€§</span></span><br><span class="line">bar.call(obj); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.c + a + b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  c: <span class="number">3</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// call()æ–¹æ³•å’Œapply()æ–¹æ³•çš„å‚æ•°:</span></span><br><span class="line"><span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºthiså°†è¦æŒ‡å‘çš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">// ç¬¬äºŒä¸ªå‚æ•°call()æ–¹æ³•æ˜¯ä»¥å•ä¸ªçš„æ–¹å¼ä¼ é€’, apply()æ˜¯ä»¥æ•°ç»„çš„æ–¹å¼ä¼ é€’</span></span><br><span class="line">bar.call(obj, <span class="number">10</span>, <span class="number">5</span>); <span class="comment">// 18</span></span><br><span class="line">bar.apply(obj,[<span class="number">10</span>,<span class="number">5</span>]); <span class="comment">// 18</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°†ç±»æ•°ç»„å¯¹è±¡è½¬æ¢ä¸ºæ•°ç»„</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">example</span>(<span class="params">a, b, c, d</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br><span class="line">  <span class="comment">// ä½¿ç”¨call/applyå°†argumentsè½¬ä¸ºæ•°ç»„, è¿”å›æ•°ç»„, argumentsä¸ä¼šæ”¹å˜</span></span><br><span class="line">  <span class="keyword">var</span> arg = [].slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(arg);</span><br><span class="line">&#125;</span><br><span class="line">example(<span class="string">'zero'</span>,<span class="string">'one'</span>,<span class="string">'two'</span>,<span class="string">'three'</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¿®æ”¹thisæŒ‡å‘</span></span><br><span class="line"><span class="keyword">var</span> bar = &#123;</span><br><span class="line">  name: <span class="string">'joker'</span>,</span><br><span class="line">  say: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">'say hello world'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">  name: <span class="string">'knight'</span></span><br><span class="line">&#125;;</span><br><span class="line">bar.say.call(foo);</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®ç°ç»§æ‰¿</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰çˆ¶ç±»çš„æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> Person = <span class="function"><span class="keyword">function</span> (<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">  <span class="keyword">this</span>.sex = [<span class="string">'male,female'</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰å­ç±»çš„æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> Son = <span class="function"><span class="keyword">function</span> (<span class="params">name, age, hobby</span>) </span>&#123;</span><br><span class="line">  Person.call(<span class="keyword">this</span>, name, age);</span><br><span class="line">  <span class="keyword">this</span>.hobby = hobby;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Son.prototype.message = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'name: '</span> + <span class="keyword">this</span>.name + <span class="string">', age: '</span> + <span class="keyword">this</span>.age + <span class="string">', sex: '</span> + <span class="keyword">this</span>.sex + <span class="string">', hobby: '</span> + <span class="keyword">this</span>.hobby);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Son(<span class="string">'Mike'</span>, <span class="number">18</span>, <span class="string">'swim'</span>).message();</span><br></pre></td></tr></table></figure>
<p>åœ¨Sonæ„é€ å‡½æ•°ä¸­ä½¿ç”¨call()æ–¹æ³•å°†çˆ¶çº§æ„é€ å‡½æ•°æ‰§è¡Œäº†ä¸€æ¬¡, ç›¸å½“äºå°†Personä¸­çš„ä»£ç åœ¨Sonæ„é€ å‡½æ•°å¤åˆ¶äº†ä¸€ä»½, thisæŒ‡å‘ä¸ºSonæ„é€ å‡½æ•°newå‡ºæ¥çš„å®ä¾‹å¯¹è±¡.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Son = <span class="function"><span class="keyword">function</span> (<span class="params">name, age, hobby</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">  <span class="keyword">this</span>.sex = [<span class="string">'male'</span>,<span class="string">'female'</span>];</span><br><span class="line">  <span class="comment">// Person.call(this, name, age); ç›¸å½“äºæ‰§è¡Œäº†ä¸Šé¢ä¸‰è¡Œä»£ç </span></span><br><span class="line">  <span class="keyword">this</span>.hobby = hobby;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>åœ¨å‘å…¶å®ƒæ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¼ é€’ä¸­, ç¡®ä¿thisæŒ‡å‘ä¿æŒä¸å˜</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æˆ‘ä»¬å¸Œæœ›bar()æ–¹æ³•è¢«objå¯¹è±¡è°ƒç”¨æ—¶, thisæŒ‡å‘objå¯¹è±¡</span></span><br><span class="line"><span class="comment">// ä½†æ˜¯åŒ¿åå‡½æ•°å¯¼è‡´thisæŒ‡å‘ä¸¢å¤±, åœ¨åŒ¿åå‡½æ•°ä¸­thisæŒ‡å‘äº†å…¨å±€</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">8</span>,</span><br><span class="line">  bar: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    setTimeout(fucntion () &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</span><br><span class="line">    &#125;,<span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.bar();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¿®æ”¹ä¸Šé¢ä»£ç </span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">8</span>,</span><br><span class="line">  bar: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å°†thisçš„å¼•ç”¨ä¿å­˜èµ·æ¥, èµ‹å€¼ç»™thatå˜é‡</span></span><br><span class="line">    <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line">    setTimeout(fucntion () &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(that.a);</span><br><span class="line">    &#125;,<span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.bar();</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°è£…bind()æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bind</span>(<span class="params">fn, obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> fn.apply(obj, <span class="built_in">arguments</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">8</span>,</span><br><span class="line">  bar: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    setTimeout(bind(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</span><br><span class="line">    &#125;, <span class="keyword">this</span>), <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.bar();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ES5ä¸­çš„bind()æ–¹æ³•</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  a: <span class="number">8</span>,</span><br><span class="line">  bar: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.a);</span><br><span class="line">    &#125;.bind(<span class="keyword">this</span>), <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h4 id="æ„é€ å‡½æ•°ä¸åŸå‹æ–¹æ³•ä¸Šçš„this"><a href="#æ„é€ å‡½æ•°ä¸åŸå‹æ–¹æ³•ä¸Šçš„this" class="headerlink" title="æ„é€ å‡½æ•°ä¸åŸå‹æ–¹æ³•ä¸Šçš„this"></a>æ„é€ å‡½æ•°ä¸åŸå‹æ–¹æ³•ä¸Šçš„this</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.foo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bingo = <span class="keyword">new</span> Person(<span class="string">'Jack'</span>, <span class="number">40</span>);</span><br><span class="line">bingo.foo();</span><br></pre></td></tr></table></figure>
<p>newæ“ä½œç¬¦è°ƒç”¨æ„é€ å‡½æ•°ä¼šç»å†æ˜¯ä¸ªé˜¶æ®µ:</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</li>
<li>æ„é€ å‡½æ•°çš„thisæŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡</li>
<li>æŒ‡å‘æ„é€ å‡½æ•°çš„ä»£ç , ä¸ºè¿™ä¸ªå¯¹è±¡æ·»åŠ å±æ€§å’Œæ–¹æ³•</li>
<li>è¿”å›æ–°å¯¹è±¡</li>
</ul>
<p>newæ“ä½œç¬¦è°ƒç”¨æ„é€ å‡½æ•°, thisæŒ‡å‘è¿™ä¸ªæ–°å»ºçš„å¯¹è±¡, ç„¶åå°†æ–°å¯¹è±¡è¿”å›, è¢«å®ä¾‹å¯¹è±¡<code>bingo</code>æ¥æ”¶.</p>
<p>åŸå‹æ–¹æ³•ä¸Šçš„this, æ ¹æ®ä¸Šé¢ä¾‹å­å‡½æ•°ä¸­çš„thiså®šä¹‰, <code>bingo.foo()</code>ä¸­çš„fooä¸ºè°ƒç”¨è€…, å®ƒè¢«bingoå¯¹è±¡æ‰€æ‹¥æœ‰, fooä¸­çš„thisæŒ‡å‘bingoå¯¹è±¡.</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/this" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a></p>
</div><div class="entry-extra"><div class="entry-tags"><a href="/tags/JavaScript/" class="tag">JavaScript</a></div></div></div></article></div></main><footer><div class="copyright container"></div><!--    - var currentDate = new Date();--><!--	  - var year = currentDate.getFullYear();--><!--    - var start = config.startYear;--><!--    - year = year == start ? year : (start ? start + ' - ' + year : year);--><!--    p Â© Copyright #{year} by #[a(href=config.url)!= config.author].	p E-mail: yie@live.cn--></footer><script async src="//cdn.bootcss.com/mathjax/2.7.0-beta.0/MathJax.js"></script><script async src="//raw.githack.com/Easyfood/pageAccelerator/master/dist/page-accelerator.min.js"></script><script async src="/script/loading.js"></script><script async src="/script/photo.js"></script></body></html>