<!DOCTYPE html><html prefix="og: http://ogp.me/ns#"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>OOP in JavaScript · yie's Blog</title><meta name="description" content="OOP in JavaScript - yie"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.ico"><link rel="stylesheet" href="//at.alicdn.com/t/font_1472710214_6648843.css"><link rel="stylesheet" href="//raw.githack.com/xwartz/hexo-theme-nuna/next/source/style/main.css?v=1.0.3"></head><body class="pupa"><div class="loading-bar"></div><main><div class="post post"><article itemscope itemtype="http://schema.org/Article" class="hentry"><div class="container"><div class="entry-header"><h1 class="entry-title">OOP in JavaScript</h1><div class="entry-description"></div><div class="entry-meta"><time itemprop="datePublished" datetime="Tuesday, April 10th 2018, 5:44:54 pm" class="updated">Apr 10, 2018</time><em class="post-count">2,354 words</em></div></div><div itemprop="articleBody" class="entry-content"><p>对象和类是面向对象的基础,封装,继承和多态是面向对象编程(OOP)的三大特性.</p>
<p>JavaScript提供了对象却缺乏类,他不能和Java等语言一样显式的定义一个类.但是JavaScript函数功能非常灵活,我们可以使用构造函数和原型对象来实现类.</p>
<h4 id="对象和类的概念"><a href="#对象和类的概念" class="headerlink" title="对象和类的概念"></a>对象和类的概念</h4><p>“对象”是面向对象编程中非常重要的一个概念,一个对象是一个”东西”(某个人或者某件事)的描述.<br>对象包含特征和行为,用OOP的术语来说,特征是对象的属性,行为是对象的方法.</p>
<p>“类”相当于一个模板,基于这个模板可以创建不同的具体对象.</p>
<blockquote>
<p>在JavaScript中一切都是基于对象的,”原型”也是对象,JavaScript的继承和重用也是通过原型实现的.</p>
</blockquote>
<h4 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h4><p>我们可以使用<code>new Array()</code>创建一个数组,使用<code>new Object()</code>创建一个对象.<code>Array()</code>和<code>Object()</code>是JavaScript内置的两个构造函数,尽管JavaScript没有提供类,我们可以将Array和Object理解为”类”的概念.</p>
<p>构造函数也是函数,定义构造函数和其它函数并没有语法上的区别.唯一的区别就是构造函数的首字母应该大写,这也是JavaScript的编程规范.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义Person()构造函数,我们可以将它理解为Person类</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 为Person类添加属性</span></span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">'Mary'</span>;</span><br><span class="line">  <span class="keyword">this</span>.age = <span class="number">18</span>;</span><br><span class="line">  <span class="keyword">this</span>.sex = <span class="string">'male'</span>;</span><br><span class="line">  <span class="comment">// 为Person类添加方法</span></span><br><span class="line">  <span class="keyword">this</span>.say = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'believe in youself'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过Person()构造函数创建实例对象</span></span><br><span class="line"><span class="keyword">var</span> foo = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">var</span> bar = <span class="keyword">new</span> Person();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>foo实例对象和bar实例对象都是通过Person构造函数创建出来的,但是修改其中一个的实例对象的属性和方法并不会影响的另一个实例对象的属性和方法.</p>
</blockquote>
<h4 id="constructor属性"><a href="#constructor属性" class="headerlink" title="constructor属性"></a>constructor属性</h4><p>当创建一个对象时,一个特殊的属性就被JavaScript自动分配给这个对象了,这个属性就是constructor属性.当访问某个对象的constructor属性时,就会返回创建这个对象的构造函数.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">'Mary'</span>;</span><br><span class="line">  <span class="keyword">this</span>.age = <span class="number">18</span>;</span><br><span class="line">  <span class="keyword">this</span>.sex = <span class="string">'male'</span>;</span><br><span class="line">  <span class="keyword">this</span>.say = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'believe in youself'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> bingo = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="built_in">console</span>.log(bingo.constructor); <span class="comment">// 返回构造函数Person</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> foo = &#123;&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(foo.constructor); <span class="comment">// 返回内置的构造函数Object</span></span><br></pre></td></tr></table></figure>
<h4 id="原型对象"><a href="#原型对象" class="headerlink" title="原型对象"></a>原型对象</h4><p>在JavaScript中定义一个函数,这个函数就会拥有prototype属性,构造函数也不例外.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">'Mary'</span>;</span><br><span class="line">  <span class="keyword">this</span>.age = <span class="number">18</span>;</span><br><span class="line">  <span class="keyword">this</span>.sex = <span class="string">'male'</span>;</span><br><span class="line">  <span class="keyword">this</span>.say = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'believe in youself'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> Person.prototype); <span class="comment">// object</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bingo = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="built_in">console</span>.log(bingo.prototype); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>构造函数Person的prototype属性是一个对象,他是属于函数的,我们称这个属性为原型对象.从Person类的角度出发,可以理解为prototype属性是属于Person类的.同时Person类的实例对象是没有prototype属性的,上面代码中的<code>bingo.prototype</code>是<code>undefined</code>,说明prototype属性是共享的.</p>
</blockquote>
<p>既然实例对象的prototype属性是一个对象,那么我们就可以给这个对象添加属性和方法.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name;</span><br><span class="line">  <span class="keyword">this</span>.say = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'believe in youself'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在构造函数Person的prototype属性上添加属性和方法</span></span><br><span class="line"><span class="comment">// 在Person.prototype属性上定义的属性和方法可以直接被Person类的实例对象使用</span></span><br><span class="line">Person.prototype.hobby = <span class="string">'swim'</span>;</span><br><span class="line">Person.prototype.run = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">'is run in the park'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> foo = <span class="keyword">new</span> Person(<span class="string">'Mary'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(foo.run());</span><br></pre></td></tr></table></figure>
<blockquote>
<p>我们可以通过<code>hasOwnPrototype</code>方法查看对象是否包含某个属性或方法.</p>
</blockquote>
<h4 id="类的实现总结"><a href="#类的实现总结" class="headerlink" title="类的实现总结"></a>类的实现总结</h4><ul>
<li>JavaScript没有类,但是构造函数可以实现”类”</li>
<li>按照JavaScript编程规范,构造函数的首字母应该大写</li>
<li>在创建对象时,JavaScript为这个对象分配了一个<code>constructor</code>属性,<code>constructor</code>属性是对象构造函数的引用</li>
<li>函数在定义时拥有了<code>prototype</code>属性,<code>prototype</code>属性也是一个对象</li>
<li>prototype属性上的属性和方法是共享的,定义在<code>prototype</code>属性的属性和方法可以被”类”的实例对象使用</li>
<li>如果属性或者方法能够定义在<code>prototype</code>属性上,就不要定义在构造函数中,使用<code>prototype</code>可以减少内存开销</li>
</ul>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Introduction_to_Object-Oriented_JavaScript" target="_blank" rel="noopener">参考链接</a></p>
</div><div class="entry-extra"><div class="entry-tags"><a href="/tags/JavaScript面对对象/" class="tag">JavaScript面对对象</a></div></div></div></article></div></main><footer><div class="copyright container"></div><!--    - var currentDate = new Date();--><!--	  - var year = currentDate.getFullYear();--><!--    - var start = config.startYear;--><!--    - year = year == start ? year : (start ? start + ' - ' + year : year);--><!--    p © Copyright #{year} by #[a(href=config.url)!= config.author].	p E-mail: yie@live.cn--></footer><script async src="//cdn.bootcss.com/mathjax/2.7.0-beta.0/MathJax.js"></script><script async src="//raw.githack.com/Easyfood/pageAccelerator/master/dist/page-accelerator.min.js"></script><script async src="/script/loading.js"></script><script async src="/script/photo.js"></script></body></html>